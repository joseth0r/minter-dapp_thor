(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[544],{82956:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/explore",function(){return t(75524)}])},44225:function(e,n,t){"use strict";t.d(n,{s:function(){return l}});var r=t(85893),o=t(1216),a=t(67294),i=t(10718),u=t(84234);function l(e){var n=e.src,t=e.srcMobile,l=e.alt,s=e.width,c=e.height,f=e.className,d=void 0===f?"relative":f,v=e.ariaHidden,m=void 0!==v&&v,x=e.immediateRender,p=void 0!==x&&x,h=(0,i.G)("md"),g=(0,a.useState)(!1),y=g[0],C=g[1];return(0,a.useEffect)((function(){p&&(0,o.Iq)()}),[p]),(0,r.jsx)(o.ZP,{className:d,children:(0,r.jsx)("img",{className:(0,u.A)("duration-500",y?"opacity-1":"opacity-0",d),alt:l,src:h?n:t||n,"aria-hidden":m,width:s,height:c,onLoad:function(){return C(!0)}})})}},30967:function(e,n,t){"use strict";t.d(n,{Z:function(){return o}});var r=t(85893);function o(){return(0,r.jsxs)("div",{className:"loader-dot-flashing flex justify-center",children:[(0,r.jsx)("span",{className:"mx-2 rounded-full w-[8px] h-[8px] bg-white inline-block dot"}),(0,r.jsx)("span",{className:"mx-2 rounded-full w-[8px] h-[8px] bg-white inline-block dot"}),(0,r.jsx)("span",{className:"mx-2 rounded-full w-[8px] h-[8px] bg-white inline-block dot"}),(0,r.jsx)("span",{className:"mx-2 rounded-full w-[8px] h-[8px] bg-white inline-block dot"})]})}},54153:function(e,n,t){"use strict";t.d(n,{H:function(){return r}});var r=(0,t(14671).Z)((function(e){return{zoomLevel:0,setZoomLevel:function(n){return e((function(){return{zoomLevel:n}}))}}}))},70812:function(e,n,t){"use strict";t.d(n,{t:function(){return l}});var r=t(85893),o=t(99477),a=t(35147),i=t(67294),u=t(54153);function l(e){var n=e.count,t=e.radius,l=e.centerRadius,s=e.newVertShader,c=e.newFragShader,f=(0,i.useRef)(),d=(0,i.useRef)(),v=(0,i.useRef)(),m=(0,a.U2)(o.TextureLoader,"textures/star.png"),x=(0,u.H)((function(e){return e.zoomLevel})),p=(0,i.useMemo)((function(){return{size:2.5,radius:t||60,centerRadius:l||8,branches:7,curve:.03,randomness:.7,randomnessPower:2.7,innerColor:"#dddcff",outerColor1:"#6d84fc",outerColor2:"#cd7cff"}}),[l,t]),h=(0,i.useMemo)((function(){for(var e=new o.Color(p.innerColor),t=new o.Color(p.outerColor1),r=new o.Color(p.outerColor2),a=[],i=[],u=0;u<n;u+=1){var l=3*u,s=4*u,c=Math.random()*p.radius+p.centerRadius,f=u%p.branches/p.branches*Math.PI*2,d=c*p.curve,v=Math.pow(Math.random(),p.randomnessPower)*(Math.random()<.5?1:-1)*p.randomness*c,m=Math.pow(Math.random(),p.randomnessPower)*(Math.random()<.5?1:-1)*p.randomness*c/2,x=Math.pow(Math.random(),p.randomnessPower)*(Math.random()<.5?1:-1)*p.randomness*c;a[l]=Math.cos(f+d)*c+v,a[l+1]=m,a[l+2]=Math.sin(f+d)*c+x;var h=e.clone();h.lerp(Math.random()>.5?t:r,c/p.radius),i[s+0]=h.r,i[s+1]=h.g,i[s+2]=h.b,i[s+3]=1}return[new Float32Array(a),new Float32Array(i),new Float32Array(Array.from({length:n},(function(){return 10*Math.random()})))]}),[n,p]),g=h[0],y=h[1],C=h[2];(0,a.xQ)((function(e,n){d.current&&(d.current.uniforms.uTime.value+=n)})),(0,i.useEffect)((function(){v.current&&(v.current.size=x?.65:2.5)}),[x]);var w=(0,i.useCallback)((function(e){var n=e.vertexShader;return n=(n="attribute float tOffset;\nvarying float tOff;\nuniform float uTime;\n".concat(n)).replace("#include <begin_vertex>",["tOff = tOffset;","float posX = length(vec2(position.x, position.z)) * cos(tOff + uTime * pow(tOff, 3.) * 0.00008);","float posZ = length(vec2(position.x, position.z)) * sin(tOff + uTime * pow(tOff, 3.) * 0.00008);","vec3 transformed = vec3( posX, position.y, posZ );"].join("\n"))}),[]),b=(0,i.useCallback)((function(e){var n=e.fragmentShader;return n=(n="uniform float uTime;\nvarying float tOff;\n".concat(n)).replace("vec4 diffuseColor = vec4( diffuse, opacity );","vec4 diffuseColor = vec4( diffuse, max(0.2, sin(uTime * 0.6 * tOff + tOff)) * 1.0 );")}),[]),j=(0,i.useCallback)((function(e){e.uniforms.uTime={value:1},e.fragmentShader=c?c(e):b(e),e.vertexShader=s?s(e):w(e),d.current=e}),[b,w,c,s]);return(0,r.jsxs)("points",{ref:f,renderOrder:-1,children:[(0,r.jsxs)("bufferGeometry",{attach:"geometry",children:[(0,r.jsx)("bufferAttribute",{attachObject:["attributes","position"],args:[g,3]}),(0,r.jsx)("bufferAttribute",{attachObject:["attributes","tOffset"],args:[C,1]}),(0,r.jsx)("bufferAttribute",{attachObject:["attributes","color"],args:[y,4]})]}),(0,r.jsx)("pointsMaterial",{ref:v,attach:"material",transparent:!0,depthWrite:!1,depthTest:!1,size:p.size,sizeAttenuation:!0,vertexColors:!0,blending:o.AdditiveBlending,map:m,onBeforeCompile:j})]})}},75524:function(e,n,t){"use strict";t.r(n),t.d(n,{BG_COLOR:function(){return nn},default:function(){return on}});var r=t(85893),o=t(84947),a=t(99477),i=t(35147),u=t(67294),l=t(73024),s=t(76665),c=t(41033),f=t(14671),d=t(38597);var v=(0,f.Z)((0,d.$e)({metadata:null,filteredData:[]},(function(e){return{setMetadata:function(n){return e((function(){return{metadata:n}}))},setFilteredData:function(n){return e((function(){return{filteredData:n}}))}}}))),m=t(53714),x=t(30967);function p(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function h(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"===typeof e)return p(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return p(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var g,y,C,w,b,j={landId:null,kodaId:null,koda:!1,sediment:[],environment:[],artifact:[],category:[],resources:[],isUpdating:!1,sedimentScrollY:0,environmentScrollY:0,categoryScrollY:0,resourcesScrollY:0,artifactScrollY:0},P=(0,f.Z)((0,d.$e)(j,(function(e){return{setLandId:function(n){return e((function(){return{landId:n}}))},setKodaId:function(n){return e((function(){return{kodaId:n}}))},addSediment:function(n){return e((function(e){return{sediment:h(e.sediment).concat([n])}}))},removeSediment:function(n){return e((function(e){var t=e.sediment;return t.splice(t.indexOf(n),1),{sediment:h(t)}}))},removeAllSediments:function(){return e((function(){return{sediment:[]}}))},addEnvironment:function(n){return e((function(e){return{environment:h(e.environment).concat([n])}}))},removeEnvironment:function(n){return e((function(e){var t=e.environment;return t.splice(t.indexOf(n),1),{environment:h(t)}}))},removeAllEnvironments:function(){return e((function(){return{environment:[]}}))},addArtifact:function(n){return e((function(e){return{artifact:h(e.artifact).concat([n])}}))},removeArtifact:function(n){return e((function(e){var t=e.artifact;return t.splice(t.indexOf(n),1),{artifact:h(t)}}))},removeAllArtifacts:function(){return e((function(){return{artifact:[]}}))},addCategory:function(n){return e((function(e){return{category:h(e.category).concat([n])}}))},removeCategory:function(n){return e((function(e){var t=e.category;return t.splice(t.indexOf(n),1),{category:h(t)}}))},removeAllCategories:function(){return e((function(){return{category:[]}}))},addResource:function(n){return e((function(e){return{resources:h(e.resources).concat([n])}}))},removeResource:function(n){return e((function(e){var t=e.resources;return t.splice(t.indexOf(n),1),{resources:h(t)}}))},removeAllResources:function(){return e((function(){return{resources:[]}}))},toggleKoda:function(){return e((function(e){return{koda:!e.koda}}))},clearFilters:function(){return e((function(){return{sediment:j.sediment,environment:j.environment,koda:j.koda,artifact:j.artifact,category:j.category,resources:j.resources}}))},clearSearchFields:function(){return e((function(){return{landId:j.landId,kodaId:j.kodaId}}))},setUpdating:function(n){return e((function(){return{isUpdating:n}}))},setEnvironmentScrollY:function(n){return e((function(){return{environmentScrollY:n}}))},setSedimentScrollY:function(n){return e((function(){return{sedimentScrollY:n}}))},setResourcesScrollY:function(n){return e((function(){return{resourcesScrollY:n}}))},setCategoryScrollY:function(n){return e((function(){return{categoryScrollY:n}}))},setArtifactScrollY:function(n){return e((function(){return{artifactScrollY:n}}))}}}))),M=(0,f.Z)((function(e){return{enableTrail:!0,setEnableTrail:function(n){return e((function(){return{enableTrail:n}}))},startIntro:!1,setStartIntro:function(n){return e((function(){return{startIntro:n}}))}}})),S=t(26038),L=(0,f.Z)((function(e,n){return{hoveredPointId:null,setHoveredPointId:function(n){return e((function(){return{hoveredPointId:n}}))},selectedPoint:null,setSelectedPoint:function(n){return e((function(){return{selectedPoint:n}}))},selectedPointPosition:function(){var e;return null===(e=n().selectedPoint)||void 0===e?void 0:e.position},isCamCtrlOn:!1,setCamCtrolOn:function(n){return e((function(){return{isCamCtrlOn:n}}))}}})),k={index:-1,position:{x:0,y:0,z:0}},N=function(){var e=(0,u.useRef)(),n=L((function(e){return e.setSelectedPoint}));return(0,r.jsxs)("mesh",{ref:e,"rotation-x":-Math.PI/2,onClick:function(){n(k)},onPointerOver:function(){e.current&&S.ZP.to(e.current.scale,{x:1.2,y:1.2,z:1.2})},onPointerOut:function(){e.current&&S.ZP.to(e.current.scale,{x:1,y:1,z:1})},renderOrder:1,children:[(0,r.jsx)("circleBufferGeometry",{args:[.1,16]}),(0,r.jsx)("meshStandardMaterial",{color:"red",transparent:!0,depthWrite:!1,side:a.DoubleSide,depthTest:!1})]})},T=t(54153),A=t(60374);g||(g={}),y||(y={}),C||(C={}),w||(w={}),b||(b={});var R=Array.from({length:7}).fill("#404996"),E=t(34059),U=t(31089),I=t(99137),O="\n  //\n  // Description : Array and textureless GLSL 2D/3D/4D simplex\n  //               noise functions.\n  //      Author : Ian McEwan, Ashima Arts.\n  //  Maintainer : ijm\n  //     Lastmod : 20110822 (ijm)\n  //     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n  //               Distributed under the MIT License. See LICENSE file.\n  //               https://github.com/ashima/webgl-noise\n  //\n  vec3 mod289(vec3 x) {\n    return x - floor(x * (1.0 / 289.0)) * 289.0;\n  }\n  \n  vec4 mod289(vec4 x) {\n    return x - floor(x * (1.0 / 289.0)) * 289.0;\n  }\n  \n  vec4 permute(vec4 x) {\n    return mod289(((x*34.0)+1.0)*x);\n  }\n  \n  vec4 taylorInvSqrt(vec4 r) {\n    return 1.79284291400159 - 0.85373472095314 * r;\n  }\n  \n  float snoise(vec3 v) {\n    const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n    const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n  \n    // First corner\n    vec3 i  = floor(v + dot(v, C.yyy) );\n    vec3 x0 =   v - i + dot(i, C.xxx) ;\n  \n    // Other corners\n    vec3 g = step(x0.yzx, x0.xyz);\n    vec3 l = 1.0 - g;\n    vec3 i1 = min( g.xyz, l.zxy );\n    vec3 i2 = max( g.xyz, l.zxy );\n  \n    //   x0 = x0 - 0.0 + 0.0 * C.xxx;\n    //   x1 = x0 - i1  + 1.0 * C.xxx;\n    //   x2 = x0 - i2  + 2.0 * C.xxx;\n    //   x3 = x0 - 1.0 + 3.0 * C.xxx;\n    vec3 x1 = x0 - i1 + C.xxx;\n    vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y\n    vec3 x3 = x0 - D.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y\n  \n    // Permutations\n    i = mod289(i);\n    vec4 p = permute( permute( permute(\n              i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n            + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))\n            + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n  \n    // Gradients: 7x7 points over a square, mapped onto an octahedron.\n    // The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)\n    float n_ = 0.142857142857; // 1.0/7.0\n    vec3  ns = n_ * D.wyz - D.xzx;\n  \n    vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)\n  \n    vec4 x_ = floor(j * ns.z);\n    vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n  \n    vec4 x = x_ *ns.x + ns.yyyy;\n    vec4 y = y_ *ns.x + ns.yyyy;\n    vec4 h = 1.0 - abs(x) - abs(y);\n  \n    vec4 b0 = vec4( x.xy, y.xy );\n    vec4 b1 = vec4( x.zw, y.zw );\n  \n    //vec4 s0 = vec4(lessThan(b0,0.0))*2.0 - 1.0;\n    //vec4 s1 = vec4(lessThan(b1,0.0))*2.0 - 1.0;\n    vec4 s0 = floor(b0)*2.0 + 1.0;\n    vec4 s1 = floor(b1)*2.0 + 1.0;\n    vec4 sh = -step(h, vec4(0.0));\n  \n    vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n    vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n  \n    vec3 p0 = vec3(a0.xy,h.x);\n    vec3 p1 = vec3(a0.zw,h.y);\n    vec3 p2 = vec3(a1.xy,h.z);\n    vec3 p3 = vec3(a1.zw,h.w);\n  \n    //Normalise gradients\n    vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n    p0 *= norm.x;\n    p1 *= norm.y;\n    p2 *= norm.z;\n    p3 *= norm.w;\n  \n    // Mix final noise value\n    vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n    m = m * m;\n    return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1),\n                                  dot(p2,x2), dot(p3,x3) ) );\n  }\n",F=(0,I.g)({uProgress:0,uTime:0,uPulse:0,uBgColor:new a.Color("#080e17"),tLandMask:null,tAnimation:null,uIntensity:1,uMaskIntensity:1,uFrames:0,uFramesPerRow:0,uScale:0,uPulseCenter:new a.Vector2(0,0)},"\n    precision highp float;\n\n    uniform float uTime;\n    uniform float uPulse;\n    uniform sampler2D tAnimation;\n    uniform vec2 uPulseCenter;\n    \n    \n    varying vec4 vWorldPos;\n    varying vec2 vUv;\n    varying vec3 vColor;\n    varying float vMeetsFilter0;\n    varying float vMeetsFilter1;\n    varying float vPulse;\n    varying float vPulseBorder;\n\n    attribute vec3 color;\n    attribute float meetsFilter0;\n    attribute float meetsFilter1;\n    attribute vec2 animationUv;\n\n\n    attribute vec3 finalPosition;\n    uniform float uProgress;\n    uniform float uFrames;\n    uniform float uFramesPerRow;\n    uniform float uScale;\n\n\n    ".concat(O,"\n\n    const float pulseBlur = 15.;\n\n    vec2 getUVTile(float tile) {\n      float x = mod(tile, uFramesPerRow) / uFramesPerRow;\n      float y = 1.0-floor(tile/uFramesPerRow) / (uFrames / uFramesPerRow);\n\n      vec2 tileUnit = vec2(1. / uFramesPerRow, -1. / (uFrames / uFramesPerRow));\n\n      return vec2(x,y) + animationUv * tileUnit;\n    }\n\n    vec3 getPosition(vec2 tc) {\n      vec3 pos = texture2D(tAnimation, tc).rgb;\n      vec3 p = vec3(-1.0) + 2.0 * pos;\n\n      return p;\n    }\n\n    void main() {\n      vec4 worldPos = vec4(position, 1.);\n      if (uProgress == 1.) {\n        worldPos = modelMatrix * instanceMatrix * worldPos;\n\n      } else {\n        float frameNum = uProgress * (uFrames - 1.);\n  \n        // bounds for frame\n        float frameLow = floor(frameNum);\n        float frameHigh = ceil(frameNum);\n  \n        float u = mod(frameNum, uFramesPerRow);\n        float v = floor(frameNum / uFramesPerRow);\n        \n        vec3 p1 = getPosition(getUVTile(frameLow));\n        vec3 p2 = getPosition(getUVTile(frameHigh));\n  \n        vec3 p = mix(p1, p2, fract(frameNum));\n\n        worldPos.xyz += p * uScale;\n        worldPos = modelMatrix * worldPos;\n      }\n\n      vMeetsFilter0 = meetsFilter0;\n      vMeetsFilter1 = meetsFilter1;\n      vColor = color;\n      vUv = uv;\n\n\n\n      float pulseMinDistance = uScale - 2. * pulseBlur;\n\n\n      vPulse = 1. - smoothstep((uScale - pulseBlur) * uPulse, uScale * uPulse, length(worldPos.xz - uPulseCenter));\n      vPulseBorder = vPulse - (1. - smoothstep(pulseMinDistance * uPulse, (pulseMinDistance + pulseBlur) * uPulse, length(worldPos.xz - uPulseCenter)));\n    \n      \n      float n = snoise(vec3(worldPos.x, worldPos.z, uTime * .25) * 1.5);\n      worldPos.x += n * .8 * (1. - uProgress);\n      worldPos.y += n * 1.2 * mix(1., vPulseBorder, uProgress);\n      \n      vWorldPos = worldPos;\n\n      gl_Position = projectionMatrix * viewMatrix * vWorldPos;\n      \n    }\n  "),"\n    precision highp float;\n\n    uniform float uTime;\n    uniform float uPulse;\n    uniform float uProgress;\n    uniform sampler2D tLandMask;\n    uniform vec3 uBgColor;\n    uniform float uMaskIntensity;\n    uniform float uScale;\n    \n    varying vec3 vColor;\n    varying float vMeetsFilter0;\n    varying float vMeetsFilter1;\n    varying vec4 vWorldPos;\n    varying vec2 vUv;\n    varying float vPulse;\n    varying float vPulseBorder;\n\n    \n    ".concat(O,"\n\n    float circle(vec2 st, float _radius, float blurriness){\n      return 1.-smoothstep(_radius-(_radius*blurriness), _radius+(_radius*blurriness), length(st));\n    }\n      \n    void main() {\n\n      vec4 landMask = texture2D(tLandMask, vUv);\n      \n      \n\n      float meetsFilter = mix(vMeetsFilter0, vMeetsFilter1, vPulse);\n      vec4 outputColor = vec4( mix(uBgColor, vColor, meetsFilter), landMask.a);\n\n\n      // float colorFactor = (1. - length(vWorldPos.xz) / (uScale / 2.)) * (1. - uProgress);\n      // outputColor.rgb -= vec3(colorFactor * .1);\n\n      float factor = vPulseBorder + uMaskIntensity;\n      \n      gl_FragColor = vec4(factor * outputColor.rgb, outputColor.a);\n     \n\n    }\n  "));(0,i.l7)({LandMaterial:F});var z=t(77854),D=function(e){var n,t=e.pointId,o=(0,u.useState)(!1),a=o[0],i=o[1],l=v((function(e){return e.metadata}));if((0,u.useEffect)((function(){var e=setTimeout((function(){i(!0)}),100);return function(){clearTimeout(e)}}),[]),null===t||-1===t||!l||!a||!l[t])return null;var s=null===(n=l[t])||void 0===n?void 0:n.position,c="#".concat(t);return(0,r.jsx)("group",{"position-x":s.x,"position-y":s.y+.3,"position-z":s.z-.3,children:(0,r.jsx)(z.V,{distanceFactor:4,zIndexRange:[0,9],children:(0,r.jsx)("div",{className:"absolute w-max -translate-x-1/2 translate-y-[calc((10vh-150px)*51/350-51px)] pointer-events-none select-none rounded-md border border-white/10 bg-black/50 px-8 pt-4 pb-4 text-center backdrop-blur-xl",children:(0,r.jsx)("h2",{className:"text-3xl text-white opacity-90",children:c})})})})},V="Escape",_="ArrowRight",B="ArrowLeft";function Z(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function H(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,a=[],i=!0,u=!1;try{for(t=t.call(e);!(i=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);i=!0);}catch(l){u=!0,o=l}finally{try{i||null==t.return||t.return()}finally{if(u)throw o}}return a}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return Z(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Z(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var W,Y=1.8,G=u.forwardRef((function(e,n){var t=(0,u.useRef)(null),s=(0,u.useRef)(null),c=(0,u.useRef)([0,0]),f=(0,u.useRef)(),d=(0,u.useRef)(),m=v(),x=m.metadata,p=m.setFilteredData,h=P((function(e){return e.setUpdating})),g=(0,u.useRef)(null),y=(0,T.H)((function(e){return e.zoomLevel})),C=H(L((function(e){return[e.hoveredPointId,e.selectedPoint,e.setHoveredPointId,e.setSelectedPoint,e.isCamCtrlOn,e.setCamCtrolOn]})),6),w=C[0],b=C[1],j=C[2],M=C[3],k=C[4],N=C[5],I=(0,i.U2)(a.TextureLoader,"textures/land-mask-gradient.png"),O=(0,i.U2)(o.I,"textures/first16frames.exr",(function(e){e.setDataType(a.FloatType)})),F=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=new a.Matrix4,o=new a.Vector3,i=new a.Quaternion,u=new a.Vector3;if((null===t||void 0===t?void 0:t.current)&&void 0!==e){t.current.getMatrixAt(e,r),r.decompose(o,i,u);var l={value:0},s=S.p8.to(l,{value:1,ease:"power3.out",duration:.1,onUpdate:function(){var l=Number.parseFloat(s.progress().toFixed(2)),c=a.MathUtils.lerp(n?1:Y,n?Y:1,l);u.set(c,c,c),r.compose(o,i,u),t.current&&(t.current.setMatrixAt(e,r),t.current.instanceMatrix.needsUpdate=!0)}})}},z=(0,u.useRef)(),_=(0,u.useRef)(0),B=(0,u.useRef)({x:0,y:0});(0,i.xQ)((0,u.useCallback)((function(e,n){var r,o=e.raycaster,a=e.mouse,i=e.camera,u=e.clock;if(t.current&&y&&!(0,U.b1)()&&!k){var l=1e3*u.elapsedTime;if(l-_.current>50&&(B.current.x!==a.x||B.current.y!==a.y)){_.current=l,B.current={x:a.x,y:a.y},o.setFromCamera(a,i);var c=o.intersectObject(t.current);if(c.length>0){var f=H(c,1)[0].instanceId;null!=f&&d.current!==f&&((null===b||void 0===b?void 0:b.index)!==f&&F(f),null!=d.current&&d.current!==(null===b||void 0===b?void 0:b.index)&&F(d.current,!1),d.current=f,j(f))}else null!=d.current&&(d.current!==(null===b||void 0===b?void 0:b.index)&&F(d.current,!1),d.current=null,j(null))}}(null===(r=s.current)||void 0===r?void 0:r.uniforms)&&(s.current.uniforms.uTime.value+=n)}),[b,j,x,y,k])),(0,u.useEffect)((function(){O&&(O.minFilter=a.NearestFilter,O.magFilter=a.NearestFilter,O.generateMipmaps=!1)}),[O,x]),(0,u.useEffect)((function(){if(x){for(var e=new a.Object3D,n=0;n<x.length;n+=1){var r=x[n].position,o=r.x,i=r.y,u=r.z;e.position.set(o,i,u),e.updateMatrix(),t.current&&t.current.setMatrixAt(n,e.matrix)}t.current&&(t.current.instanceMatrix.needsUpdate=!0)}}),[x]),(0,u.useEffect)((function(){var e;(null===(e=s.current)||void 0===e?void 0:e.uniforms)&&t.current&&(s.current.uniforms.tLandMask.value=I,s.current.uniforms.tAnimation.value=O)}),[O,I]);var Z=P((function(e){return{sediment:e.sediment,category:e.category,environment:e.environment,artifact:e.artifact,resources:e.resources,koda:e.koda}}),A.Z),G=(0,u.useMemo)((function(){if(x){for(var e=new Float32Array(3*x.length),n=new a.Color,t=0;t<x.length;t+=1)n.set(x[t].color),n.toArray(e,3*t);return e}}),[x]);(0,l.M4)({landColor:{value:R[0],onChange:function(e){var n=new a.Color;if(t.current&&x&&G){for(var r=0;r<x.length;r+=1)n.set(e).toArray(G,3*r);t.current.geometry.attributes.color.needsUpdate=!0}}}});var K=(0,u.useRef)(null),Q=(0,u.useRef)(null),X=(0,u.useMemo)((function(){return x&&new Float32Array(x.length).fill(1)}),[x]),$=(0,u.useMemo)((function(){return x&&new Float32Array(x.length).fill(1)}),[x]),q=(0,u.useMemo)((function(){if(x){for(var e,n,t=new Float32Array(2*x.length),r=0;r<x.length;r+=1)e=r%400/400,n=Math.floor(r/400)/250,t[2*r]=e,t[2*r+1]=n;return t}return new Float32Array}),[x]),ne=(0,u.useCallback)((function(e){e.stopPropagation(),M(null)}),[M]);return(0,E.O)("keydown",(function(e){e.code===V&&M(null)})),(0,u.useEffect)((function(){var e;if(x&&$&&X){var n=Array.from({length:x.length},(function(e,n){return n}));p(n),K.current&&Q.current&&(Q.current.needsUpdate=!0,K.current.needsUpdate=!0),(null===(e=z.current)||void 0===e?void 0:e.isActive())||(z.current=S.p8.to(J.uPulse,{value:1,duration:1.5,onStart:function(){h(!0)},ease:"power2.in",onComplete:function(){for(var e,n=0;n<x.length;n+=1)e=X[n],X[n]=$[n],$[n]=e;K.current&&Q.current&&(Q.current.needsUpdate=!0,K.current.needsUpdate=!0),J.uPulse.value=0,h(!1)}}))}}),[x,X,$,h,Z,p]),(0,u.useEffect)((function(){g.current&&F(g.current.index,!1),b&&(F(b.index,!0),N(!0),j(null),W=window.setTimeout((function(){N(!1)}),1e3)),g.current=b||null}),[b,N,j]),(0,u.useEffect)((function(){var e,n,r,o,i,u;(null===(e=K.current)||void 0===e?void 0:e.setUsage)&&(null===(n=Q.current)||void 0===n?void 0:n.setUsage)&&(null===(o=K.current)||void 0===o||o.setUsage(a.DynamicDrawUsage),null===(i=Q.current)||void 0===i||i.setUsage(a.DynamicDrawUsage));(null===(r=f.current)||void 0===r||r.rotateX(a.MathUtils.degToRad(-90)),t.current)&&(null===(u=t.current)||void 0===u||u.instanceMatrix.setUsage(a.DynamicDrawUsage),t.current.material.uniforms.uProgress=J.uProgress,t.current.material.uniforms.uPulse=J.uPulse);return function(){window.clearTimeout(W)}}),[]),(0,r.jsxs)(r.Fragment,{children:[x&&G&&X&&$&&(0,r.jsxs)("instancedMesh",{renderOrder:1,ref:function(e){t.current=e,n&&(n.current=e)},args:[void 0,void 0,x.length],onClick:y?function(e){e.stopPropagation();var n=e.instanceId,t=e.sourceEvent,r=t.clientX,o=t.clientY;if(Math.sqrt(Math.pow(c.current[0]-r,2)+Math.pow(c.current[1]-o,2))>2)e.stopPropagation();else if(void 0!==n&&x){F(n);var a=x[n];M(a)}}:void 0,onPointerDown:y?function(e){c.current=[e.sourceEvent.clientX,e.sourceEvent.clientY]}:void 0,onPointerMissed:ne,children:[(0,r.jsxs)("planeBufferGeometry",{args:[.14,.14],ref:f,children:[(0,r.jsx)("instancedBufferAttribute",{attachObject:["attributes","color"],args:[G,3]}),(0,r.jsx)("instancedBufferAttribute",{attachObject:["attributes","meetsFilter0"],args:[X,1],ref:K}),(0,r.jsx)("instancedBufferAttribute",{attachObject:["attributes","meetsFilter1"],args:[$,1],ref:Q}),(0,r.jsx)("instancedBufferAttribute",{attachObject:["attributes","animationUv"],args:[q,2]})]}),(0,r.jsx)("landMaterial",{ref:s,attach:"material",transparent:!0,depthWrite:!1,side:a.DoubleSide,depthTest:!1,"uniforms-uScale-value":ee,"uniforms-uFramesPerRow-value":4,"uniforms-uFrames-value":16})]}),x&&null!=w&&w!==(null===b||void 0===b?void 0:b.index)&&(0,r.jsx)(D,{pointId:w}),b&&(0,r.jsx)(D,{pointId:b.index})]})}));G.displayName="LandItems";var K=t(70812),Q=(0,I.g)({tMap:null,uOpacity:0,uCamDist:2.5,uScale:0},"\n  varying vec2 vUv;\n  varying vec4 vWorldPos;\n\n  void main() {\n    vUv = uv;\n    vWorldPos = modelMatrix * vec4(position, 1.);\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n  }\n  ","\n  #define PI 3.14159265359\n\n  varying vec2 vUv;\n  varying vec4 vWorldPos;\n  uniform float uOpacity;\n  uniform sampler2D tMap;\n  uniform float uCamDist;\n  uniform float uScale;\n\n  const vec3 color = vec3(0.13,0.18,0.28);\n  \n  mat2 rotate(float a){\n    return mat2( cos(a), -sin(a), sin(a), cos(a));\n  }\n\n  float map(float value, float min1, float max1, float min2, float max2) {\n    return min2 + (value - min1) * (max2 - min2) / (max1 - min1);\n  }\n\n  float circleOutline(float radius) {\n    float strokeWidth = map(uCamDist, 2.5, 16., 0.035, 0.095);\n    vec2 coord = vWorldPos.xz;\n    float inCircle = step(length(coord), radius);\n    float circleStroke = step(length(coord), radius + strokeWidth);\n    return circleStroke - inCircle;\n  }\n\n  float line(float rad) {\n    vec2 coord = vWorldPos.xz;\n    float width = map(uCamDist, 2.5, 16., 0.015, 0.05);\n    vec2 center = vec2(0., 0.);\n    coord = rotate(rad) * coord;\n    // bottom-left\n    vec2 bl = step(vec2(center.x - width, center.y - uScale * 0.55), coord);\n    float pct = bl.x * bl.y;\n    // top-right\n    vec2 tr = step(coord, vec2(center.x + width, center.y + uScale * 0.55));\n    pct *= tr.x * tr.y;\n    return pct;\n  }\n\n  float drawRadar() {\n    float r = uScale / 2.;\n    float circle1 = circleOutline(r * 1.04);\n    float circle2 = circleOutline(r * 5. / 6.);\n    float circle3 = circleOutline(r * 2. / 3.);\n    float circle4 = circleOutline(r / 2.);\n    float circle5 = circleOutline(r / 3.);\n    float circle6 = circleOutline(r / 6.);\n    float circles = circle1 + circle2 + circle3 + circle4 + circle5 + circle6;\n\n    float line1 = line(0.0);\n    float line2 = line(PI / 6.0);\n    float line3 = line(PI / 3.0);\n    float line4 = line(PI / 2.0);\n    float line5 = line(- PI / 3.0);\n    float line6 = line(- PI / 6.0);\n    float lines = min(1.0, line1 + line2 + line3 + line4 + line5 + line6);\n    \n    return min(1., circles + lines);\n  }\n\n\n  void main() {\n    vec2 uv = vUv;\n    // float mask = .5 * min(1., texture2D(tMap, uv).a + drawRadar());\n    float mask = .7 * drawRadar();\n\n    gl_FragColor = vec4(color, uOpacity * mask);\n  }\n  ");(0,i.l7)({LandPlaneMaterial:Q});var X=function(e){var n=e.camSource,t=(0,u.useRef)(),o=(0,u.useRef)(),l=(0,i.U2)(a.TextureLoader,"textures/map.png"),s=(0,T.H)().zoomLevel;return(0,u.useEffect)((function(){var e;(null===(e=t.current)||void 0===e?void 0:e.uniforms)&&s>=1&&S.p8.to(t.current.uniforms.uOpacity,{value:1})}),[s]),(0,u.useEffect)((function(){l&&(l.needsUpdate=!0)}),[l]),(0,i.xQ)((function(e){var r=e.raycaster,a=e.camera,i=e.mouse;if(s>0&&t.current&&(null===n||void 0===n?void 0:n.distance)&&(t.current.uniforms.uCamDist.value=n.distance),!(0,U.b1)()&&o.current){r.setFromCamera(i,a);var u=r.intersectObject(o.current);u.length>0&&J.uMouse.value.copy(u[0].point)}})),(0,r.jsx)("object3D",{renderOrder:0,children:(0,r.jsxs)("mesh",{"rotation-x":-Math.PI/2,ref:o,children:[(0,r.jsx)("planeBufferGeometry",{args:[1.2*ee,1.2*ee]}),(0,r.jsx)("landPlaneMaterial",{ref:t,side:a.DoubleSide,transparent:!0,"uniforms-tMap-value":l,"uniforms-uScale-value":ee})]})})};function $(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function q(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,a=[],i=!0,u=!1;try{for(t=t.call(e);!(i=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);i=!0);}catch(l){u=!0,o=l}finally{try{i||null==t.return||t.return()}finally{if(u)throw o}}return a}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return $(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return $(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var J={uMouse:{value:new a.Vector3(0,0,0)},uProgress:{value:0},uPulse:{value:0},uVignette:{value:0},uTrailStrength:{value:.97}},ee=138;function ne(e){var n=e.camSource,t=(0,u.useRef)(null),o=(0,u.useRef)(null),s=(0,i.Ky)((function(e){return e.gl})),c=(0,u.useState)(!1),f=c[0],d=c[1],v=q((0,T.H)((function(e){return[e.zoomLevel,e.setZoomLevel]})),2),m=v[0],x=v[1],p=(0,u.useRef)(null),h=M((function(e){return e.startIntro})),g=M((function(e){return e.setEnableTrail}));return(0,u.useEffect)((function(){var e=function(){p.current&&p.current.material.uniforms.uPulseCenter.value.set(J.uMouse.value.x,J.uMouse.value.z),S.p8.timeline({defaults:{ease:"power2.inOut"},onComplete:function(){p.current&&p.current.material.uniforms.uPulseCenter.value.set(0,0),J.uPulse.value=0,g(!1),x(1),s.domElement.style.cursor="none"}}).to(J.uTrailStrength,{value:0,duration:.5},0).to(J.uPulse,{value:1,duration:.75},0)};return m<1&&(s.domElement.style.pointerEvents="none",s.domElement.style.cursor="default",s.domElement.addEventListener("click",e,{once:!0})),function(){return s.domElement.removeEventListener("click",e)}}),[s.domElement,g,x,m]),(0,l.M4)({progress:{value:J.uProgress.value,max:1,min:0,onChange:function(e){J.uProgress.value=e}},pulse:{value:J.uPulse.value,max:1,min:0,onChange:function(e){J.uPulse.value=e}}}),(0,i.xQ)((function(e,n){var r=e.mouse;if(null!==t.current&&(t.current&&m<1&&(t.current.rotation.y=(t.current.rotation.y+.1*n)%(2*Math.PI)),o.current)){var i=m>=1?0:1;o.current.rotation.y=a.MathUtils.damp(o.current.rotation.y,i*(-r.x*Math.PI)/6,.75,n),o.current.rotation.x=a.MathUtils.damp(o.current.rotation.x,i*(r.y*Math.PI)/10,.75,n)}})),(0,u.useEffect)((function(){t.current&&m>=1&&S.p8.to(t.current.rotation,{y:0,duration:4})}),[m]),(0,u.useEffect)((function(){h&&o.current&&p.current&&t.current&&(J.uProgress.value=0,J.uTrailStrength.value=0,S.p8.timeline({defaults:{ease:"power2.inOut"},onComplete:function(){s.domElement.style.cursor="pointer",s.domElement.style.pointerEvents="auto"}}).to(J.uProgress,{duration:5,value:1},.25).to(J.uTrailStrength,{value:.97,duration:.5,ease:"power2.in"},3).fromTo(o.current.rotation,{z:-Math.PI/5},{z:0,duration:2},0).fromTo(o.current.rotation,{x:-Math.PI/1.4},{duration:5,x:0},0).fromTo(o.current.scale,{x:0,y:0,z:0},{x:2,y:2,z:2,duration:2.25,ease:"power2.in"},0).to(o.current.scale,{duration:3,x:1,y:1,z:1},2))}),[h]),(0,u.useEffect)((function(){var e=setTimeout((function(){d(!0)}),30);return function(){clearTimeout(e)}}),[]),(0,r.jsx)("group",{ref:o,children:(0,r.jsxs)("group",{ref:t,children:[(0,r.jsx)(N,{}),(0,r.jsx)(G,{ref:p}),(0,r.jsx)(X,{camSource:n}),f&&(0,r.jsx)(K.t,{count:2e3})]})})}var te=t(8606),re=t(7531),oe=t(54458),ae=t(89079),ie=t(86591),ue=t(35848),le=t(10718),se={uniforms:{tDiffuse:{value:null},uIntensity:{value:0}},vertexShader:"\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t}",fragmentShader:"\n\t\tprecision highp float;\n\t\tuniform sampler2D tDiffuse;\n    uniform float uIntensity;\n\t\tvarying vec2 vUv;\n\n    void main() {\n      vec4 outputColor = texture2D(tDiffuse, vUv);\n\n      vec2 vignetteUv = vUv * (1. - vUv.yx);\n      float v = vignetteUv.x * vignetteUv.y * 15.;\n      v = pow(v, uIntensity);\n\n\n\t\t\n\n      gl_FragColor = outputColor * v;\n\t\t}"},ce={uniforms:{tDiffuse:{value:null},tAdd:{value:null}},vertexShader:"\n    varying vec2 vUv;\n    void main() {\n    vUv = uv;\n      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n    }",fragmentShader:"\n    uniform sampler2D tDiffuse;\n    uniform sampler2D tAdd;\n    varying vec2 vUv;\n    void main() {\n      vec4 color = texture2D( tDiffuse, vUv );\n      vec4 add = texture2D( tAdd, vUv );\n      gl_FragColor = color + add;\n    }"},fe={uniforms:{tDiffuse:{value:null},lightPosition:{value:new a.Vector2(.39,.3)},exposure:{value:.51},decay:{value:.93},weight:{value:.33},samples:{value:65}},vertexShader:"\n    varying vec2 vUv;\n    void main() {\n      vUv = uv;\n      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n    }",fragmentShader:"\n    varying vec2 vUv;\n    uniform sampler2D tDiffuse;\n    uniform vec2 lightPosition;\n    uniform float exposure;\n    uniform float decay;\n    uniform float weight;\n    uniform int samples;\n    const int MAX_SAMPLES = 100;\n    \n    float map(float value, float min1, float max1, float min2, float max2) {\n      return min2 + (value - min1) * (max2 - min2) / (max1 - min1);\n    }\n    \n    void main()\n    {\n      vec2 texCoord = vUv;\n      // vec2 deltaTextCoord = texCoord - lightPosition;\n      vec2 deltaTextCoord = texCoord - vec2(texCoord.x, 0.05);\n      float density = map(texCoord.y, 0.1, 0.9, 0.7, 0.1);\n      deltaTextCoord *= 1.0 / float(samples) * density;\n      vec4 color = texture2D(tDiffuse, texCoord);\n      float illuminationDecay = 1.0;\n      for(int i=0; i < MAX_SAMPLES; i++) {\n        if(i == samples) break;\n        texCoord -= deltaTextCoord;\n        vec4 tex = texture2D(tDiffuse, texCoord);\n        tex *= illuminationDecay * weight;\n        color += tex;\n        illuminationDecay *= decay;\n      }\n      gl_FragColor = color * exposure;\n    }"};(0,i.l7)({EffectComposer:te.xC,ShaderPass:re.T,RenderPass:oe.C,UnrealBloomPass:ie.m,BokehPass:ae.A,AfterimagePass:ue.m});var de=new a.Vector2(.38,.3),ve=new a.Vector2(.51,.65);function me(e){var n=e.camSource,t=L((function(e){return e.selectedPoint})),o=(0,i.Ky)((function(e){return e.scene})),s=(0,i.Ky)((function(e){return e.size})),c=(0,i.Ky)((function(e){return e.gl})),f=(0,i.Ky)((function(e){return e.camera})),d=(0,u.useMemo)((function(){return new a.WebGLRenderTarget(s.width,s.height,{format:a.RGBAFormat,stencilBuffer:!1})}),[s]),v=(0,u.useRef)(),x=(0,u.useRef)(),p=(0,u.useState)((function(){return new a.Vector2(1024,1024)}))[0],h=(0,u.useState)(!1),g=h[0],y=h[1],C=(0,u.useRef)(),w=(0,u.useRef)(),b=(0,u.useRef)(),j=(0,u.useRef)(),P=(0,T.H)().zoomLevel,k=(0,le.G)("md"),N=M((function(e){return e.enableTrail}));return(0,l.M4)({intensity:{max:1,min:0,value:J.uVignette.value,onChange:function(e){J.uVignette.value=e}},afterImage:{max:1,min:0,value:J.uTrailStrength.value,onChange:function(e){J.uTrailStrength.value=e}}}),(0,u.useEffect)((function(){(0,m.o8)(x.current)||(0,m.o8)(v.current)||(x.current.setSize(s.width,s.height),v.current.setSize(s.width,s.height))}),[s]),(0,i.xQ)((function(){(0,m.o8)(x.current)||(0,m.o8)(v.current)||(c.setClearColor("black"),c.clear(),f.layers.set(1),v.current.render(),c.setClearColor(nn),c.clear(),f.layers.set(0),x.current.render()),P>0&&j.current&&(null===n||void 0===n?void 0:n.distance)&&(j.current.strength=a.MathUtils.mapLinear(n.distance,3,20,.45-(N?.2:0),.9-(N?.2:0)))}),1),(0,u.useEffect)((function(){var e=setTimeout((function(){y(!0)}),300);return C.current&&(C.current.material.uniforms.uIntensity=J.uVignette),J.uTrailStrength.value=0,b.current&&(b.current.shaderMaterial.uniforms.damp=J.uTrailStrength),function(){clearTimeout(e)}}),[]),(0,u.useEffect)((function(){t||d.dispose();var e=k?.9:.45;t?(clearTimeout(w.current),S.p8.to(J.uVignette,{value:e,duration:1.2})):w.current=window.setTimeout((function(){S.p8.to(J.uVignette,{value:.1,duration:1.2})}),500)}),[t,c,d,k]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("effectComposer",{ref:v,args:[c,d],renderToScreen:!1,children:[(0,r.jsx)("renderPass",{attachArray:"passes",args:[o,f]}),g&&t&&(0,r.jsx)("shaderPass",{attachArray:"passes",args:[fe],needsSwap:!1,"uniforms-lightPosition-value":k?de:ve})]}),(0,r.jsxs)("effectComposer",{ref:x,args:[c],children:[(0,r.jsx)("renderPass",{attachArray:"passes",scene:o,camera:f}),d&&(0,r.jsx)("shaderPass",{attachArray:"passes",clear:!0,args:[ce],"uniforms-tAdd-value":d.texture}),(0,r.jsx)("unrealBloomPass",{ref:j,attachArray:"passes",args:[p,1.8,.2,.11]}),N&&(0,r.jsx)("afterimagePass",{ref:b,attachArray:"passes",args:[.97]}),(0,r.jsx)("shaderPass",{ref:C,attachArray:"passes",args:[se]})]})]})}var xe=new a.Color("#030508");function pe(){var e=(0,u.useRef)(null),n=(0,u.useRef)(),t=L((function(e){return e.selectedPoint})),o=L((function(e){return e.selectedPointPosition()})),l=(0,i.Ky)((function(e){return e.gl}));return(0,u.useEffect)((function(){if(null===o||void 0===o?void 0:o.x){var r;l.setClearColor(xe);var i={h:0,s:0,l:0};new a.Color(null===t||void 0===t?void 0:t.color).getHSL(i),n.current&&n.current.color.setHSL(i.h,i.s,i.l),null===(r=e.current)||void 0===r||r.position.set(o.x,o.y,o.z)}else l.setClearColor(new a.Color(nn))}),[o,t,l]),(0,r.jsxs)("mesh",{layers:1,ref:e,visible:!!t,children:[(0,r.jsx)("cylinderGeometry",{args:[.095,.095,.02,30]}),(0,r.jsx)("meshBasicMaterial",{ref:n,transparent:!0})]})}var he,ge=t(62469),ye=t(84234),Ce=(0,u.forwardRef)((function(e,n){var t=e.children,o=e.onClick,a=e.className,i=void 0===a?"":a;return(0,r.jsx)("button",{ref:n,className:(0,ye.A)("border border-gray-border w-[30px] h-[30px] md:w-[36px] md:h-[36px] flex justify-center items-center rounded-full bg-black hover:bg-white hover:text-black focus-visible:bg-white focus-visible:text-black",i),onClick:o,children:t})}));function we(){var e=L((function(e){return e.selectedPoint})),n=L((function(e){return e.setSelectedPoint})),t=v(),o=t.metadata,a=t.filteredData,i=(0,u.useRef)(null),l=(0,u.useRef)(null),s=(0,u.useCallback)((function(t){if(e&&o){var r=a.indexOf(e.index);if(r<0)n(o[a[0]]);else{var i=r+(t===he.prev?-1:1);i=i<0?a.length-1:i>=a.length?0:i,(0,m.o8)(a[i])||n(o[a[i]])}}}),[a,o,e,n]);return(0,E.O)("keydown",(function(n){var t,r=n.code;if(e)if(r===_)null===(t=l.current)||void 0===t||t.focus(),s(he.next);else if(r===B){var o;null===(o=i.current)||void 0===o||o.focus(),s(he.prev)}})),(0,E.O)("keyup",(function(n){var t,r=n.code;if(e)if(r===_)null===(t=l.current)||void 0===t||t.blur();else if(r===B){var o;null===(o=i.current)||void 0===o||o.blur()}})),(0,r.jsxs)("div",{className:(0,ye.A)("absolute top-[50%] w-full flex -translate-y-2/4 z-30 justify-between duration-500",e?"opacity-100":"opacity-0"),children:[(0,r.jsx)(Ce,{className:"ml-[16px] md:-ml-[20px]",onClick:function(){return s(he.prev)},ref:i,children:(0,r.jsx)(ge.wyc,{className:"w-5 h-5"})}),(0,r.jsx)(Ce,{className:"mr-[16px] md:-mr-[20px]",onClick:function(){return s(he.next)},ref:l,children:(0,r.jsx)(ge.XCv,{className:"w-5 h-5"})})]})}Ce.displayName="CarouselButton",function(e){e[e.prev=0]="prev",e[e.next=1]="next"}(he||(he={}));var be,je=t(34051),Pe=t.n(je),Me=t(44225),Se=t(41899),Le=t(28442),ke=t(70790);function Ne(){return(0,r.jsx)("svg",{width:"25",height:"27",viewBox:"0 0 25 27",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M2.87594 12.597C6.20912 7.61619 10.4703 7.28456 13.3538 8.5059C16.2372 9.72725 18.8163 12.6803 17.4056 17.6145C15.9942 21.1373 9.54076 21.1711 8.55163 20.8041C7.5708 20.4402 4.67132 17.0196 4.99643 13.5239C5.00175 13.4668 5.02975 13.4129 5.07251 13.3746C7.71367 11.0119 9.62851 10.9916 12.2996 11.9025C14.686 13.0267 15.003 16.0586 15.0447 16.7635C15.05 16.8544 14.9978 16.9371 14.9149 16.9747C10.9514 18.7704 6.20911 16.4362 6.20911 12.7224M2.87594 12.597C2.00175 17.7495 5.80823 23.2055 7.61462 23.7322C9.42102 24.2589 17.6059 24.2144 20.1471 19.3986C22.6883 14.5828 17.8854 3.8146 15.0511 2.88394C12.2167 1.95328 6.04624 6.61946 2.87594 12.597Z",stroke:"#EBD06D"})})}function Te(){return(0,r.jsxs)("svg",{width:"29",height:"21",viewBox:"0 0 29 21",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("path",{d:"M3.54166 10.3502C3.54166 10.3502 6.07507 11.3618 9.73446 10.3502M9.73446 10.3502L13.9473 3.41067V0.998489C13.9473 0.998489 9.35816 0.998476 5.43769 2.96112C2.76454 4.29933 0.448242 7.14461 0.448242 7.14461M9.73446 10.3502C9.73446 10.3502 8.33141 14.0425 6.07508 15.0915",stroke:"#4F68EA"}),(0,r.jsx)("path",{d:"M24.5863 10.3502C24.5863 10.3502 22.0529 11.3618 18.3935 10.3502M18.3935 10.3502L14.1807 3.41067V0.998489C14.1807 0.998489 18.7698 0.998476 22.6902 2.96112C25.3634 4.29933 27.6797 7.14461 27.6797 7.14461M18.3935 10.3502C18.3935 10.3502 19.7965 14.0425 22.0529 15.0915",stroke:"#4F68EA"}),(0,r.jsx)("path",{d:"M14.061 2.01621C14.061 2.01621 14.061 9.9655 14.061 17.5032M14.061 17.5032C11.9631 17.5032 10.9141 20.5803 10.9141 20.5803M14.061 17.5032C16.159 17.5032 17.208 20.5803 17.208 20.5803",stroke:"#4F68EA"})]})}function Ae(){return(0,r.jsx)("svg",{width:"29",height:"27",viewBox:"0 0 29 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.9395 0.343792C14.7036 0.214234 14.4172 0.216817 14.1836 0.350609L1.22104 7.77458L1.23493 7.79884C1.22927 7.80132 1.22628 7.80269 1.22628 7.80269C1.072 7.94051 0.970703 8.14123 0.970703 8.37735V13.0037C0.970703 13.2795 1.11776 13.5345 1.35656 13.6726L13.9051 20.931L14.4706 21.2086C14.4709 21.2091 14.471 21.2094 14.471 21.2094L15.2245 20.9307L27.773 13.6723C28.0118 13.5341 28.1589 13.2792 28.1589 13.0033V7.60147L14.9395 0.343792ZM14.5645 15.1038L26.6516 7.91473L14.57 1.28169L2.72813 8.06382L14.5645 15.1038ZM15.0648 15.9697L27.1589 8.7765V12.8723L15.0648 19.8679V15.9697ZM14.0648 15.97L1.9707 8.77684V12.8726L14.0648 19.8682V15.97Z",fill:"#EE4444"})})}function Re(){return(0,r.jsx)("svg",{width:"25",height:"25",viewBox:"0 0 25 25",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M12.3145 0.130859C5.60824 0.130859 0.169922 5.56918 0.169922 12.2754C0.169922 18.9816 5.60824 24.4199 12.3145 24.4199C19.0207 24.4199 24.459 18.9816 24.459 12.2754C24.459 5.56918 19.0231 0.130859 12.3145 0.130859ZM6.16203 12.6834L6.21304 12.6009L9.37305 7.65804C9.4192 7.5876 9.5285 7.59489 9.5625 7.67261C10.0896 8.85549 10.5462 10.3274 10.3325 11.2431C10.2426 11.6196 9.99242 12.1297 9.71067 12.6009C9.67423 12.6689 9.63537 12.7369 9.59165 12.8025C9.57222 12.8316 9.53821 12.8486 9.50178 12.8486H6.25433C6.16689 12.8486 6.11588 12.7539 6.16203 12.6834ZM20.2424 14.3837C20.2424 14.4298 20.2157 14.4687 20.1768 14.4857C19.9315 14.5901 19.0935 14.9763 18.7462 15.4597C17.8572 16.696 17.1796 18.4642 15.6615 18.4642H9.33176C7.08745 18.4642 5.27063 16.6401 5.27063 14.3885V14.3157C5.27063 14.2574 5.3192 14.2088 5.37993 14.2088H8.9067C8.97714 14.2088 9.02814 14.272 9.02329 14.3424C8.99657 14.5707 9.04029 14.8063 9.14959 15.0201C9.35847 15.4451 9.79325 15.7099 10.262 15.7099H12.0084V14.3472H10.2815C10.194 14.3472 10.1406 14.2452 10.1916 14.1724C10.211 14.1432 10.2305 14.1141 10.2547 14.0801C10.4175 13.8469 10.6507 13.4874 10.8838 13.0769C11.0417 12.8 11.1947 12.5037 11.3186 12.2074C11.3429 12.1539 11.3623 12.0981 11.3842 12.0446C11.4182 11.9499 11.4522 11.86 11.4765 11.7726C11.5008 11.6973 11.5226 11.6196 11.5421 11.5467C11.6004 11.2941 11.6246 11.0269 11.6246 10.75C11.6246 10.6407 11.6198 10.5266 11.6101 10.4197C11.6052 10.3007 11.5906 10.1817 11.5761 10.0627C11.5663 9.95821 11.5469 9.85377 11.5275 9.7469C11.5008 9.58902 11.4668 9.43114 11.4279 9.27326L11.4133 9.21254C11.3842 9.10324 11.3575 9.00123 11.3235 8.89192C11.2239 8.55188 11.1121 8.21912 10.9907 7.90822C10.947 7.78434 10.8984 7.66533 10.8474 7.54874C10.7745 7.369 10.6992 7.20626 10.6312 7.05324C10.5948 6.9828 10.5656 6.91965 10.5365 6.85407C10.5025 6.78121 10.4685 6.70834 10.4321 6.6379C10.4078 6.58446 10.3786 6.53346 10.3592 6.48488L10.1454 6.0914C10.1163 6.03796 10.1649 5.97238 10.2232 5.98938L11.5591 6.35129H11.5639C11.5664 6.35129 11.5663 6.35129 11.5688 6.35129L11.7437 6.4023L11.938 6.45573L12.0084 6.47516V5.68334C12.0084 5.29957 12.3145 4.98867 12.6958 4.98867C12.8852 4.98867 13.0577 5.0664 13.1791 5.1927C13.303 5.319 13.3807 5.49146 13.3807 5.68334V6.86136L13.524 6.90022C13.5338 6.90508 13.5459 6.90994 13.5556 6.91722C13.5896 6.94151 13.6406 6.98037 13.7038 7.02895C13.7548 7.06782 13.8082 7.11639 13.8714 7.1674C14.0001 7.27184 14.1556 7.40543 14.3232 7.55845C14.3669 7.59732 14.4106 7.63618 14.4519 7.67747C14.6681 7.87907 14.911 8.11467 15.1441 8.377C15.2097 8.45229 15.2729 8.52516 15.3384 8.60531C15.4016 8.68547 15.472 8.76319 15.5303 8.84092C15.6105 8.94536 15.6931 9.05466 15.7684 9.16882C15.8024 9.22225 15.8437 9.27812 15.8752 9.33156C15.9724 9.47486 16.055 9.62302 16.1351 9.77119C16.1691 9.8392 16.2031 9.91449 16.2323 9.98736C16.3221 10.1865 16.3926 10.3881 16.4363 10.5922C16.4509 10.6359 16.4606 10.682 16.4655 10.7257V10.7355C16.48 10.7938 16.4849 10.8569 16.4897 10.9225C16.5092 11.1289 16.4995 11.3378 16.4557 11.5467C16.4363 11.6342 16.412 11.7167 16.3829 11.8066C16.3513 11.8916 16.3221 11.9791 16.2833 12.0641C16.208 12.2365 16.1205 12.4114 16.0161 12.5717C15.9821 12.6324 15.9408 12.6956 15.9019 12.7563C15.8582 12.8195 15.8121 12.8802 15.7732 12.9385C15.7174 13.0138 15.6591 13.0915 15.5983 13.1619C15.5449 13.2348 15.4915 13.3077 15.4307 13.3733C15.3482 13.4728 15.268 13.5651 15.183 13.655C15.1344 13.7133 15.081 13.774 15.0251 13.8275C14.9717 13.8882 14.9158 13.9416 14.8672 13.9902C14.7822 14.0752 14.7142 14.1384 14.6559 14.1942L14.5175 14.3181C14.498 14.3375 14.4713 14.3472 14.4446 14.3472H13.3807V15.7099H14.7191C15.0178 15.7099 15.302 15.6054 15.5328 15.4087C15.6105 15.3407 15.953 15.0443 16.3586 14.5974C16.3732 14.5804 16.3902 14.5707 16.4096 14.5658L20.104 13.4971C20.1744 13.4777 20.2424 13.5287 20.2424 13.6016V14.3837Z",fill:"white"})})}function Ee(){return(0,r.jsxs)("svg",{width:"25",height:"25",viewBox:"0 0 20 19",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsxs)("g",{clipPath:"url(#clip0_101_206)",children:[(0,r.jsx)("path",{d:"M10.0556 18.9452C15.2478 18.9452 19.457 14.7361 19.457 9.54391C19.457 4.3517 15.2478 0.142578 10.0556 0.142578C4.86342 0.142578 0.654297 4.3517 0.654297 9.54391C0.654297 14.7361 4.86342 18.9452 10.0556 18.9452Z",fill:"white"}),(0,r.jsx)("path",{d:"M6.6179 6.98025C8.518 5.09089 11.5987 5.09089 13.4988 6.98025L15.1401 8.6123L13.4988 10.2444C11.5987 12.1337 8.518 12.1337 6.6179 10.2444L4.97656 8.6123L6.6179 6.98025Z",fill:"white"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.78906 8.61496L7.51571 4.88574H12.5975L16.3242 8.61496L10.0566 14.8799L3.78906 8.61496ZM12.9363 7.25717C11.3528 5.6668 8.76035 5.6668 7.17691 7.25719L5.82177 8.61235L7.17691 9.96749C8.76035 11.5579 11.3528 11.5579 12.9363 9.96749L14.2914 8.61235L12.9363 7.25717Z",fill:"black"}),(0,r.jsx)("path",{d:"M10.0568 9.798C9.40223 9.798 8.87109 9.26739 8.87109 8.61226C8.87109 7.95712 9.40223 7.42651 10.0568 7.42651C10.7114 7.42651 11.2426 7.95712 11.2426 8.61226C11.2426 9.26739 10.7114 9.798 10.0568 9.798Z",fill:"black"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.10742 8.61208C8.10742 9.68837 8.98002 10.5601 10.0554 10.5601C11.1309 10.5601 12.0035 9.68837 12.0035 8.61208C12.0035 7.53578 11.1309 6.66406 10.0554 6.66406C8.98002 6.66406 8.10742 7.53578 8.10742 8.61208ZM9.20847 8.61208C9.20847 9.08003 9.58786 9.45904 10.0554 9.45904C10.523 9.45904 10.9024 9.08003 10.9024 8.61208C10.9024 8.14413 10.523 7.76511 10.0554 7.76511C9.58786 7.76511 9.20847 8.14413 9.20847 8.61208Z",fill:"black"})]}),(0,r.jsx)("defs",{children:(0,r.jsx)("clipPath",{id:"clip0_101_206",children:(0,r.jsx)("rect",{width:"18.8027",height:"18.8027",fill:"white",transform:"translate(0.654297 0.142578)"})})})]})}function Ue(e){var n=e.className,t=void 0===n?"":n;return(0,r.jsxs)("svg",{className:t,width:"16",height:"18",viewBox:"0 0 16 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("path",{d:"M7.85016 5.76663C6.84658 5.76663 4.81988 6.48709 4.81988 6.48709C4.57559 4.2595 5.30007 3.03466 6.17816 0.880981C4.32178 1.853 3.5602 2.58293 2.9787 4.46997L1.91256 3.55583C1.8516 4.51209 1.91256 5.76663 2.19363 6.7553L0.541016 5.94674C0.842833 7.41308 1.17143 8.11282 2.19363 9.11681L0.541361 12.6972L1.91256 12.611L1.07131 14.7499L2.53033 14.4122C2.53033 14.4122 3.50377 17.2892 7.85016 17.1369",stroke:"white",strokeWidth:"0.632425"}),(0,r.jsx)("path",{d:"M7.77875 5.76663C8.78233 5.76663 10.809 6.48709 10.809 6.48709C11.0533 4.2595 10.3288 3.03466 9.45074 0.880981C11.3071 1.853 12.0687 2.58293 12.6502 4.46997L13.7163 3.55583C13.7773 4.51209 13.7163 5.76663 13.4353 6.7553L15.0879 5.94674C14.7861 7.41308 14.4575 8.11282 13.4353 9.11681L15.0875 12.6972L13.7163 12.611L14.5576 14.7499L13.0986 14.4122C13.0986 14.4122 12.1251 17.2892 7.77875 17.1369",stroke:"white",strokeWidth:"0.632425"})]})}function Ie(e){var n=e.title,t=e.subTitle,o=e.className,a=e.subClass,i=e.isKoda,u=e.subInfo,l=e.subColor;return(0,r.jsxs)("header",{className:"text-center ".concat(o||""),children:[(0,r.jsx)("h3",{className:"font-cta text-[8px] text-gray uppercase mb-1 tracking-widest",children:n}),t?(0,r.jsxs)("h3",{className:"text-sm uppercase min-h-[24px] ".concat(a||""," ").concat(i?"flex items-center":""),children:[i&&(0,r.jsx)(Ue,{className:"mr-3 mb-0.5"}),t]}):(0,r.jsx)("h3",{className:"text-gray",children:"NONE"}),u&&(0,r.jsx)("h4",{className:"font-cta ".concat(l||"text-gold"," text-[8px] uppercase tracking-widest"),children:u})]})}function Oe(e){var n=e.className,t=e.children;return(0,r.jsx)("div",{className:"flex flex-col items-center text-center bg-gray-10 p-5 rounded ".concat(n||""),children:t})}function Fe(e,n,t,r,o,a,i){try{var u=e[a](i),l=u.value}catch(s){return void t(s)}u.done?n(l):Promise.resolve(l).then(r,o)}!function(e){e[e.Northern=0]="Northern",e[e.Eastern=1]="Eastern",e[e.Southern=2]="Southern",e[e.Western=3]="Western"}(be||(be={}));var ze=function(e){var n={sediment:{},environment:{},resources:[{},{},{},{}]},t=!0,r=!1,o=void 0;try{for(var a,i=e[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var u=a.value;switch(u.trait_type){case"Category":n.category=u.value;break;case"Sediment":n.sediment.value=u.value;break;case"Sediment Tier":n.sediment.tier=u.value;break;case"Environment":n.environment.value=u.value;break;case"Environment Tier":n.environment.tier=u.value;break;case"Northern Resource":n.resources[0].value=u.value;break;case"Northern Resource Tier":n.resources[0].tier=u.value;break;case"Eastern Resource":n.resources[1].value=u.value;break;case"Eastern Resource Tier":n.resources[1].tier=u.value;break;case"Southern Resource":n.resources[2].value=u.value;break;case"Southern Resource Tier":n.resources[2].tier=u.value;break;case"Western Resource":n.resources[3].value=u.value;break;case"Western Resource Tier":n.resources[3].tier=u.value;break;case"Artifact":n.artifact=u.value;break;case"Koda":n.koda=u.value}}}catch(l){r=!0,o=l}finally{try{t||null==i.return||i.return()}finally{if(r)throw o}}return n},De=function(e){var n=e.imageURL;return(0,r.jsx)("div",{className:"relative h-0 pb-[138%]",children:(0,r.jsx)(Me.s,{className:"absolute rounded-md w-full h-full",src:"".concat(null!==n&&void 0!==n?n:"/assets/card-back.png"),alt:"Land Image Bg",immediateRender:!0})})};function Ve(e){var n=e.selectedLandId;return n&&"-1"===n?(0,r.jsxs)("header",{children:[(0,r.jsx)(De,{imageURL:"textures/Clubhouse.jpg"}),(0,r.jsx)("div",{className:"text-center my-5",children:(0,r.jsx)("h2",{className:"font-headline text-[40px] leading-tight",children:"Bored Ape Yacht Club"})})]}):(0,r.jsx)(_e,{selectedLandId:n})}function _e(e){var n=e.selectedLandId,t=(0,u.useState)(null),o=t[0],a=t[1],i=(0,u.useState)(!1),l=i[0],s=i[1];if((0,u.useEffect)((function(){if(n){var e=function(){var e,t=(e=Pe().mark((function e(){var t,r,o;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("https://api.otherside.xyz/lands","/").concat(null!==n&&void 0!==n?n:""),{headers:{Authorization:"Bearer dfcf7e43111768fbbbc3cc43bcdd31b5"}});case 3:if(200!==(t=e.sent).status){e.next=12;break}return e.next=7,t.json();case 7:r=e.sent,o={id:Number(n),imageURL:r.image,metadata:ze(r.attributes)},a(o),e.next=13;break;case 12:404===t.status&&a(null);case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.error(e.t0);case 18:s(!0);case 19:case"end":return e.stop()}}),e,null,[[0,15]])})),function(){var n=this,t=arguments;return new Promise((function(r,o){var a=e.apply(n,t);function i(e){Fe(a,r,o,i,u,"next",e)}function u(e){Fe(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();e()}return function(){a(null)}}),[n]),(null===o||void 0===o?void 0:o.imageURL)&&(null===o||void 0===o?void 0:o.metadata)){var c=o.metadata,f=c.sediment,d=c.environment,v=c.resources,m=c.artifact;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("header",{children:[(0,r.jsx)(De,{imageURL:o.imageURL}),(0,r.jsxs)("div",{className:"text-center my-5",children:[(0,r.jsx)("h2",{className:"font-headline text-[40px] leading-tight",children:d.value}),(0,r.jsx)("p",{className:"text-sm text-purple",children:"TIER ".concat(d.tier)})]})]}),(0,r.jsx)("article",{className:"border-x-0 border-y py-5 my-5 border-gray-border flex justify-center",children:(0,r.jsx)(Ie,{className:"w-2/5",title:"token id",subTitle:" #".concat(n||"")})}),(0,r.jsxs)("div",{className:"flex justify-center mt-5",children:[(0,r.jsxs)(Se.r,{href:"".concat(Le.xC,"/").concat(ke.yt.address,"/").concat(n||""),className:"button-secondary flex justify-center items-center min-w-[0] mr-2 ml-0 text-[8px] md:text-[11px] basis-3/6 p-3",children:[(0,r.jsx)("span",{className:"mr-2",children:"View on OpenSea"})," ",(0,r.jsx)(Re,{})]}),(0,r.jsxs)(Se.r,{href:"".concat(Le.Mg,"/").concat(ke.yt.address,"/").concat(n||""),className:"button-secondary flex justify-center items-center min-w-[0] mx-0 text-[8px] md:text-[11px] basis-3/6 p-3",children:[(0,r.jsx)("span",{className:"mr-2",children:"View on LooksRare"})," ",(0,r.jsx)(Ee,{})]})]}),(0,r.jsxs)("article",{children:[(0,r.jsx)("h2",{className:"font-headline text-3xl text-center text-gray-dark my-5",children:"Otherdeed Properties"}),(0,r.jsxs)("div",{className:"flex my-3 justify-between",children:[(0,r.jsxs)(Oe,{className:"w-[48.3%]",children:[(0,r.jsx)(Ae,{}),(0,r.jsx)(Ie,{className:"mt-3",subClass:"text-base",title:"Sediment",subTitle:f.value,subInfo:"TIER ".concat(f.tier)})]}),(0,r.jsxs)(Oe,{className:"w-[48.3%]",children:[m&&(0,r.jsx)(Ne,{}),(0,r.jsx)(Ie,{className:"mt-3",subClass:"text-base",title:"Artifact",subTitle:m})]})]}),(0,r.jsx)("div",{className:"flex flex-wrap justify-between",children:v.map((function(e,n){return(0,r.jsxs)(Oe,{className:"w-[48.3%] mb-3",children:[(0,r.jsx)(Te,{}),(0,r.jsx)(Ie,{className:"mt-3",subClass:"text-base",title:"".concat(be[n]," Resource"),subTitle:e.value,subInfo:e?"TIER ".concat(e.tier):null})]},"resource-".concat(n))}))})]})]})}return(0,r.jsxs)("header",{children:[(0,r.jsx)(De,{}),(0,r.jsx)(Ie,{title:"token id",subTitle:" #".concat(n||"")}),(0,r.jsx)("div",{className:"mt-3",children:l?(0,r.jsx)("p",{className:"font-cta text-sm text-center text-gray-light",children:"Specified token has not been minted"}):(0,r.jsx)(x.Z,{})})]})}function Be(e){var n=e.handleLocate,t=function(){var e;(null===(e=f.current)||void 0===e?void 0:e.isActive())&&f.current.kill()},o=(0,u.useRef)(null),a=(0,u.useRef)(null),i=(0,u.useState)(),l=i[0],s=i[1],c=(0,le.G)("md"),f=(0,u.useRef)(),d=L((function(e){return e.selectedPoint})),v=L((function(e){return e.setSelectedPoint})),x=(0,u.useRef)(!1),p=(0,u.useCallback)((function(){var e=a.current;t(),f.current=S.p8.timeline({onComplete:function(){if(x.current=!0,d){var e=d.index;s(e.toString())}}}),x.current&&f.current.to(e,{duration:.5,opacity:0,ease:"power3.in",onComplete:function(){s(null)}}),f.current.to(e,{y:"0",opacity:1,ease:"power3.out"})}),[d]),h=(0,u.useCallback)((function(){var e=a.current;t(),f.current=S.p8.to(e,.5,{y:c?"10px":"100%",opacity:0,ease:"power3.in",onComplete:function(){x.current=!1,s(null)}})}),[c]);return(0,u.useEffect)((function(){(0,m.Ft)(d)?h():p()}),[d,h,p]),(0,r.jsxs)("div",{className:(0,ye.A)("absolute z-30 h-[50vh] top-auto bottom-0 w-full md:h-[calc(100%_+_theme(space.5))] md:right-0 md:top-0 md:bottom-auto md:w-[460px]",l?"pointer-events-all cursor-auto":"pointer-events-none"),children:[(0,r.jsx)(we,{}),(0,r.jsx)("div",{className:"absolute w-full h-full overflow-y-auto scrollbar-hide md:py-5",ref:o,children:(0,r.jsxs)("div",{ref:a,className:"w-full px-[64px] py-5 relative border border-white/10 rounded-2xl cursor-auto text-white bg-black opacity-0 translate-y-full md:translate-y-[10px] min-h-full md:p-5",children:[l&&(0,r.jsx)(Ve,{selectedLandId:l}),(0,r.jsx)("button",{className:"absolute right-[22px] md:right-7 top-7 z-30",onClick:function(){v(null)},children:(0,r.jsx)(ge.ypG,{className:"w-4 h-4"})}),(0,r.jsx)("button",{className:"absolute left-[16px] md:left-7 top-6 z-30 border-gray-border border w-[30px] h-[30px] flex justify-center items-center rounded-full md:p-1 md:w-auto md:h-auto",onClick:function(){return n()},children:(0,r.jsx)(ge.Rub,{opacity:.8})})]})})]})}var Ze=t(10105),He=Ze.Z.ACTION,We={MOUSE:a.MOUSE,Vector2:a.Vector2,Vector3:a.Vector3,Vector4:a.Vector4,Quaternion:a.Quaternion,Matrix4:a.Matrix4,Spherical:a.Spherical,Box3:a.Box3,Sphere:a.Sphere,Raycaster:a.Raycaster,MathUtils:{DEG2RAD:a.MathUtils.DEG2RAD,clamp:a.MathUtils.clamp}};Ze.Z.install({THREE:We}),(0,i.l7)({CameraControlsDefault:Ze.Z});var Ye=.52*ee,Ge=new a.Box3(new a.Vector3(-Ye,-1,2-Ye),new a.Vector3(Ye,1,Ye)),Ke=function(e,n,t){if(e&&n){var r=t&&e.distance>6?6:e.distance,o=t?[a.MathUtils.mapLinear(r*a.MathUtils.mapLinear(window.innerHeight,600,1200,1.9,1),2.5,11.4,.7,3.1),.1,-.1]:[0,-.45,1.3];null===e||void 0===e||e.moveTo(n.x+o[0],n.y+o[1],n.z+o[2],!0),t?e.distance>6&&e.dollyTo(6,!0):e.dollyTo(3,!0)}},Qe=(0,u.forwardRef)((function(e,n){var t=e.setCamSource,o=(0,u.useRef)(null),l=(0,i.Ky)((function(e){return e.camera})),s=(0,i.Ky)((function(e){return e.gl})),c=(0,T.H)((function(e){return e.zoomLevel})),f=L((function(e){return e.selectedPoint})),d=L((function(e){return e.selectedPointPosition()})),v=L((function(e){return e.setCamCtrolOn})),m=(0,le.G)("md");(0,i.xQ)((function(e,n){if(o.current){var t=o.current,r=a.MathUtils.clamp(t.distance,2.5,54);t.polarAngle=a.MathUtils.mapLinear(r,2.5,54,Math.PI/3.9,Math.PI/5),t.update(n)}}));var x=(0,u.useCallback)((function(){var e=new a.Vector3,n=o.current;if(n){var t=n.getTarget(e),r=t.x,i=t.z;Math.pow(r+(r<0?i<0?4:8:i>0?-8:-4),2)/Math.pow(r<0?70:i>0?71:69,2)+Math.pow(i+(r<0?.5:0),2)/Math.pow(r<0||i<0?69:70,2)<=1||(n.truck(r<-42&&(i<-10||i>24)?1:r>36&&i<-12||r>39&&i>24?-1:0,0,!0),n.forward(i<-46&&r<-12||i<-43&&r>8?-1:i>46&&r<-24||i>43&&r>32?1:0,!0))}}),[m]),p=function(){v(!0)},h=function(){v(!1)};return(0,u.useEffect)((function(){var e=o.current;return t(e),null===e||void 0===e||e.setBoundary(Ge),null===e||void 0===e||e.addEventListener("rest",x),null===e||void 0===e||e.addEventListener("controlstart",p),null===e||void 0===e||e.addEventListener("controlend",h),function(){null===e||void 0===e||e.dispose(),null===e||void 0===e||e.removeEventListener("rest",x),null===e||void 0===e||e.removeEventListener("controlstart",p),null===e||void 0===e||e.removeEventListener("controlend",h)}}),[]),(0,u.useEffect)((function(){var e=o.current;d&&Ke(e,d,m)}),[d,m]),(0,u.useEffect)((function(){var e=o.current;0===c?(null===e||void 0===e||e.moveTo(0,0,8,!0),null===e||void 0===e||e.rotatePolarTo(Math.PI/5,!0)):f||(null===e||void 0===e||e.moveTo(1,0,2,!0),null===e||void 0===e||e.rotatePolarTo(Math.PI/4,!0),null===e||void 0===e||e.dollyTo(7,!0))}),[c]),(0,r.jsx)("cameraControlsDefault",{ref:Xe(o,n),args:[l,s.domElement],truckSpeed:3,enabled:0!==c,mouseButtons:{left:He.TRUCK,middle:He.DOLLY,right:He.NONE,wheel:He.DOLLY,shiftLeft:He.NONE},touches:{one:He.TOUCH_TRUCK,two:He.TOUCH_DOLLY_TRUCK,three:He.NONE},minDistance:2.5,maxDistance:54,restThreshold:.1,verticalDragToForward:!0})}));function Xe(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return function(e){var t=!0,r=!1,o=void 0;try{for(var a,i=n[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var u=a.value;"function"===typeof u?u(e):u&&(u.current=e)}}catch(l){r=!0,o=l}finally{try{t||null==i.return||i.return()}finally{if(r)throw o}}}}Qe.displayName="CameraControls";var $e=(0,I.g)({tMap:null},"\n  varying vec2 vUv;\n\n  \n  void main()\t{\n    vUv = uv;\n    \n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n  }\n  ","\n  uniform sampler2D tMap;\n  varying vec2 vUv;\n\n\n  void main() {\n    gl_FragColor = texture2D(tMap, vUv);\n  }\n  ");(0,i.l7)({CursorMaterial:$e});function qe(){var e=(0,u.useRef)(null),n=L((function(e){return e.hoveredPointId})),t=(0,i.U2)(a.TextureLoader,"textures/cursor.png");return(0,u.useEffect)((function(){var t=S.p8.to({value:0},{value:1,ease:"power3.out",duration:.1,onUpdate:function(){var r;if(null===(r=e.current)||void 0===r?void 0:r.scale.x){var o,i=Number.parseFloat(t.progress().toFixed(2)),u=a.MathUtils.lerp(null!==n?1:1.5,null!==n?1.5:1,i);null===(o=e.current)||void 0===o||o.scale.set(u,e.current.scale.y,u)}}})}),[n]),(0,i.xQ)((function(){e.current&&e.current.position.copy(J.uMouse.value)})),(0,r.jsx)("object3D",{ref:e,children:(0,r.jsxs)("mesh",{"rotation-x":-Math.PI/2,renderOrder:2,children:[(0,r.jsx)("planeBufferGeometry",{args:[.25,.25]}),(0,r.jsx)("cursorMaterial",{"uniforms-tMap-value":t,transparent:!0,depthTest:!1,depthWrite:!1})]})})}function Je(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function en(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,a=[],i=!0,u=!1;try{for(t=t.call(e);!(i=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);i=!0);}catch(l){u=!0,o=l}finally{try{i||null==t.return||t.return()}finally{if(u)throw o}}return a}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return Je(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Je(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var nn="#080e17",tn=function(e){return(2*e-1)*ee},rn=function(){var e=L((function(e){return e.setSelectedPoint})),n=L((function(e){return e.selectedPointPosition()})),t=L((function(e){return e.setHoveredPointId})),f=(0,u.useRef)(null),d=(0,u.useState)(null),p=d[0],h=d[1],g=(0,T.H)(),y=g.zoomLevel,C=g.setZoomLevel,w=M((function(e){return e.setEnableTrail})),b=(0,u.useRef)(),j=(0,le.G)("md"),S=M((function(e){return e.setStartIntro})),N=P((function(e){return e.clearFilters})),A=en(P((function(e){return[e.landId,e.kodaId]})),2),E=A[0],I=A[1],O=en(v((function(e){return[e.metadata,e.setMetadata]})),2),F=O[0],z=O[1],D=(0,u.useCallback)((function(n){(null===n||void 0===n?void 0:n.position)&&(C(1),e(n))}),[C,e]),V=(0,u.useCallback)((function(e){var n="string"===typeof e?Number.parseInt(e,10):e;return(0,m.o8)(F)?null:(null===F||void 0===F?void 0:F.find((function(e){var t,r;return null!==(null===(t=e.metadata)||void 0===t?void 0:t.koda)&&(null===(r=e.metadata)||void 0===r?void 0:r.koda)===n})))||null}),[F]),_=function(e,n){var t="number"===typeof n?n.toString():n;return(e?e.find((function(e){return null!==e.index&&e.index.toString()===t})):void 0)||null};(0,u.useEffect)((function(){if((0,m.Ft)(F)){var e=new o.I;e.setDataType(a.FloatType),e.load("textures/finalFrame.exr",(function(e){for(var n=e.image,t=n.width,r=n.height,o=n.data,a=t*r,i=r-1,u=0,l=[],s=0;s<a;s+=1){var c=t*i+u;l.push({index:s,color:R[0],position:{x:tn(Number(o[4*c])),y:tn(Number(o[4*c+1])),z:tn(Number(o[4*c+2]))}}),(u+=1)>=t&&(u=0,i-=1)}l[-1]=k,z(l)}))}else{var n=window.location.search,t=new URLSearchParams(n).get("id");if(t){var r=_(F,t);if(r)return J.uProgress.value=1,w(!1),void D(r)}S(!0)}}),[D,z,F,S,w]),(0,u.useEffect)((function(){return function(){e(null),t(null),C(0),N(),w(!0)}}),[N,w,t,e,C]),(0,u.useEffect)((function(){if(null!=E){var e=_(F,E);e&&D(e)}}),[E,D,F]),(0,u.useEffect)((function(){if(I){var e=V(I);e&&D(e)}}),[I,D,V]);var B=new a.Vector3,Z=new a.Vector3;(0,u.useEffect)((function(){(0,i.gy)((function(){if(b.current&&f.current){var e=b.current,n=e.target,t=e.pos,r=e.dist,o=f.current.getTarget(B);o.x=Number(o.x.toFixed(2)),o.y=Number(o.y.toFixed(2)),o.z=Number(o.z.toFixed(2));var a=f.current.getPosition(Z);a.x=Number(a.x.toFixed(2)),a.y=Number(a.y.toFixed(2)),a.z=Number(a.z.toFixed(2));var i=f.current.distance.toFixed(2);n&&n.textContent!==JSON.stringify(o)&&(n.textContent=JSON.stringify(o)),t&&t.textContent!==JSON.stringify(a)&&(t.textContent=JSON.stringify(a)),r&&r.textContent!==i&&(r.textContent=i)}}))}),[]);var H=(0,l.M4)({enableOrbitControls:!1}).enableOrbitControls;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"select-none overflow-hidden z-40 h-screen w-full pt-20 px-2 pb-2 md:px-8 md:pb-5",children:F?(0,r.jsxs)("div",{className:"relative w-full h-full ".concat(y>=1?"cursor-none":"cursor-auto"),children:[(0,r.jsxs)(i.Xz,{className:"rounded-md ".concat(y?"cursor-none":"cursor-auto"),shadows:!0,camera:{position:[0,50,60],fov:70},dpr:[1,2],onCreated:function(e){e.gl.setClearColor(new a.Color(nn))},gl:{antialias:!0},children:[(0,r.jsxs)(u.Suspense,{fallback:null,children:[(0,r.jsx)(ne,{camSource:p}),n&&(0,r.jsx)(pe,{})]}),H?(0,r.jsx)(s.z,{}):(0,r.jsx)(Qe,{ref:f,setCamSource:h}),y>=1&&(0,r.jsx)(u.Suspense,{fallback:null,children:!(0,U.b1)()&&(0,r.jsx)(qe,{})}),(0,r.jsx)("ambientLight",{intensity:5}),(0,r.jsx)(me,{camSource:p})]}),Le.TQ&&(0,r.jsx)(c.j,{}),(0,r.jsx)(Be,{handleLocate:function(){var e=f.current;Ke(e,n,j)}})]}):(0,r.jsx)("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",children:(0,r.jsx)(x.Z,{})})}),(0,r.jsx)(l.Zf,{hidden:!Le.TQ})]})};rn.displayName="Map";var on=rn}},function(e){e.O(0,[737,216,440,866,784,790,774,888,179],(function(){return n=82956,e(e.s=n);var n}));var n=e.O();_N_E=n}]);